{"version":3,"sources":["here.js","Sidebar.js","MapContainer.js","App.js","index.js"],"names":["hereCredentials","hereIsolineUrl","options","step","concat","mode","traffic","center","type","maxIsolineRangeLookup","time","distance","Sidebar","props","react_default","a","createElement","className","onClick","updateOptions","class","name","value","checked","Math","round","range","onChange","updateRange","min","max","sliderVal","href","MapContainer","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleMapMove","zoom","map","current","viewport","handleMarkerDrag","coordinates","marker","leafletElement","getLatLng","lat","lng","React","createRef","Map","zoomControl","attributionControl","onMoveend","ref","TileLayer","url","style","Marker","position","draggable","onDragEnd","isolines","isoline","i","Polygon","key","fillOpacity","weight","positions","shape","color","Component","App","updateIsolines","promises","state","m","length","fetch","then","x","json","Promise","all","res","response","component","split","setState","componentDidMount","cat","defineProperty","evt","target","src_Sidebar","src_MapContainer","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.fe79e6f4.chunk.js","sourcesContent":["const hereCredentials = {\n   id: 'UQ75LhFcnAv0DtOUwBEA',\n   code: 'f5nyezNmYF4wvuJqQgNSkg'\n}\n\nconst hereIsolineUrl = (options, step) => `https://isoline.route.api.here.com/routing/7.2/calculateisoline.json?app_id=${hereCredentials.id}&app_code=${hereCredentials.code}&mode=shortest;${options.mode};traffic:${options.traffic ? 'enabled' : 'disabled'}&start=geo!${options.center[0]},${options.center[1]}&range=${step}&rangetype=${options.type}`\n\nconst hereTileUrl = (style) => `https://2.base.maps.api.here.com/maptile/2.1/maptile/newest/${style}/{z}/{x}/{y}/512/png8?app_id=${hereCredentials.id}&app_code=${hereCredentials.code}&ppi=320`;\n\nconst maxIsolineRangeLookup = {\n   time: 5000, //20000?\n   distance: 80000\n}\n\nexport {\n   hereCredentials,\n   hereIsolineUrl,\n   hereTileUrl,\n   maxIsolineRangeLookup\n}\n","import React from 'react';\nimport './App.css'\n\nimport '@lui/init/dist/lui-init.min'\nimport '@lui/here-layer-theme/dist/lui-here-layer-theme.min'\nimport '@lui/radiobutton/dist/lui-radiobutton.min'\nimport '@lui/checkbox/dist/lui-checkbox.min'\n\nconst Sidebar = (props) => {\n\n   return (\n      <div className=\"sidebar\">\n         <div className=\"header\">\n            <h1>HERE Isoline Explorer</h1>\n            <div className=\"subtitle\">HERE Routing Isolines in action.</div>\n         </div>\n         <div className=\"content\">\n            <div className=\"section\">\n               <div className=\"section-title\">\n                  Transporation mode\n               </div>\n               <lui-radiobutton-group>\n                  <lui-radiobutton\n                     onClick={() => props.updateOptions('pedestrian', 'mode')}\n                     class=\"lui-small\"\n                  >\n                     <input\n                        type=\"radio\"\n                        name=\"mode\"\n                        value=\"pedestrian\"\n                        checked={props.options.mode === 'pedestrian'}\n                     />\n                     Pedestrian\n                  </lui-radiobutton>\n                  <lui-radiobutton\n                     onClick={() => props.updateOptions('car', 'mode')}\n                     class=\"lui-small\"\n                  >\n                     <input\n                        type=\"radio\"\n                        checked={props.options.mode === 'car'}\n\n                     />\n                     Car\n                  </lui-radiobutton>\n               </lui-radiobutton-group>\n            </div>\n            <div className=\"section\">\n               <div className=\"section-title\">\n                  Traffic enabled\n               </div>\n               <lui-checkbox\n                  class=\"lui-small\"\n                  onClick={() => props.updateOptions(!props.options.traffic, 'traffic')}\n               >\n                  <input\n                     type=\"checkbox\"\n                     checked={props.options.traffic}\n                  />\n                  Traffic\n               </lui-checkbox>\n            </div>\n\n            <div className=\"section\">\n               <div className=\"section-title\">\n                  Time or distance\n               </div>\n               <lui-radiobutton-group>\n                  <lui-radiobutton\n                     onClick={() => props.updateOptions('distance', 'type')}\n                     class=\"lui-small\"\n                  >\n                     <input\n                        type=\"radio\"\n                        checked={props.options.type === 'distance'}\n                     />\n\n                     Distance\n                  </lui-radiobutton>\n                  <lui-radiobutton\n                     onClick={() => props.updateOptions('time', 'type')}\n                     class=\"lui-small\"\n                  >\n                     <input\n                        type=\"radio\"\n                        checked={props.options.type === 'time'}\n                     />\n                     Time\n                  </lui-radiobutton>\n               </lui-radiobutton-group>\n            </div>\n            <div className=\"section\">\n               <div className=\"section-title\">\n                  Range\n               </div>\n               <p>\n                  {\n                     props.options.type === 'distance' ?\n                     Math.round(props.options.range * 0.000621371) + ' miles' :\n                     Math.round(props.options.range / 60) + ' minutes'\n                  }\n               </p>\n               <input\n                  onChange={props.updateRange}\n                  type=\"range\"\n                  min={1}\n                  max={props.max}\n                  value={props.sliderVal}\n                  className=\"slider\"\n               />\n            </div>\n            <div className=\"section subtitle\">\n               <div>\n                  Each step of the isoline represents 1/5 of the total range.\n               </div>\n               <br/>\n               <div>HERE Routing Isoline {' '}\n                  <a href=\"https://developer.here.com/documentation/routing/topics/request-isoline.html\">\n                     documentation\n                  </a>\n               </div>\n               <br />\n               <div>\n                  Made by <a href=\"https://twitter.com/dbabbs\">@dbabbs</a>\n               </div>\n\n            </div>\n\n         </div>\n      </div>\n   )\n}\n\nexport default Sidebar;\n","import React from 'react';\nimport { Map, TileLayer, Marker, Polygon } from 'react-leaflet';\nimport { hereTileUrl } from './here';\n\nclass MapContainer extends React.Component {\n   constructor(props) {\n      super(props);\n      this.marker = React.createRef();\n      this.map = React.createRef();\n   }\n\n   handleMapMove = () => {\n      const zoom = this.map.current.viewport.zoom;\n      this.props.handleMapMove(zoom);\n   }\n\n\n   handleMarkerDrag = () => {\n      const coordinates = this.marker.current.leafletElement.getLatLng();\n      const center = [coordinates.lat, coordinates.lng];\n      this.props.handleMarkerDrag(center);\n   }\n\n   render() {\n      return (\n         <div className=\"map\">\n            <Map\n               center={this.props.center}\n               zoom={this.props.zoom}\n               zoomControl={false}\n               attributionControl={false}\n               onMoveend={this.handleMapMove}\n               ref={this.map}\n            >\n               <TileLayer\n                  url={hereTileUrl('reduced.night')}\n               />\n               <Marker\n                  position={this.props.center}\n                  draggable={true}\n                  onDragEnd={this.handleMarkerDrag}\n                  ref={this.marker}\n               />\n               {\n                  this.props.isolines.map((isoline, i) => {\n                     return (\n                        <Polygon\n                           key={i}\n                           fillOpacity={0.05}\n                           weight={2}\n                           positions={isoline.shape}\n                           color={isoline.color}\n                        />\n                     )\n                  })\n               }\n            </Map>\n         </div>\n      )\n   }\n\n}\nexport default MapContainer;\n","import React from 'react';\nimport './App.css';\nimport { hereIsolineUrl, maxIsolineRangeLookup } from './here';\n\nimport Sidebar from './Sidebar';\nimport MapContainer from './MapContainer';\n\nimport '@lui/init/dist/lui-init.min'\nimport '@lui/here-layer-theme/dist/lui-here-layer-theme.min'\n\nclass App extends React.Component {\n\n   constructor(props) {\n      super(props);\n\n      this.marker = React.createRef();\n      this.map = React.createRef();\n\n      this.state = {\n         isolines:[\n            { color: '#41D38D', shape: [] },\n            { color: '#47D59C', shape: [] },\n            { color: '#4BD6A4', shape: [] },\n            { color: '#52D8B6', shape: [] },\n            { color: '#5DDCCF', shape: [] }\n         ],\n         center: [47.605779, -122.315744],\n         mode: 'car',\n         range: 10000,\n         type: 'distance',\n         traffic: false,\n         zoom: 12\n      };\n   }\n\n   updateIsolines = () => {\n      const promises = this.state.isolines.map((m,i) => {\n         const range = Math.round( i / this.state.isolines.length * this.state.range );\n         return fetch(hereIsolineUrl(this.state, range))\n            .then(x => x.json())\n      });\n\n      Promise.all(promises).then(res => {\n         const isolines = this.state.isolines.map((x, i) => {\n            if (res[i].response.isoline[0].component.length > 0) {\n               x.shape = res[i].response.isoline[0].component[0].shape.map(x => [x.split(',')[0], x.split(',')[1]]);\n            } else {\n               x.shape = [];\n            }\n            return x;\n         })\n         this.setState({ isolines });\n      })\n   }\n\n   handleMapMove = (zoom) => this.setState({ zoom });\n\n   componentDidMount = () => this.updateIsolines();\n\n   handleMarkerDrag = (center) => this.setState({ center }, () => this.updateIsolines());\n\n   updateOptions = (value, cat) => {\n      if (cat === 'type' && this.state.range > maxIsolineRangeLookup[value]) {\n         this.setState({\n            range: maxIsolineRangeLookup[value]\n         });\n      }\n      this.setState({\n         [cat]: value\n      }, () => this.updateIsolines());\n   }\n\n   updateRange = evt => {\n      let range = evt.target.value;\n      this.setState({ range }, () => this.updateIsolines());\n   }\n\n\n   render() {\n      const max = this.state.type === 'distance' ?\n         maxIsolineRangeLookup.distance :\n         maxIsolineRangeLookup.time;\n      const sliderVal = this.state.range > max ? max : this.state.range;\n\n      return (\n         <div className=\"app\">\n            <lui-desktoplayer-theme>\n               <Sidebar\n                  updateOptions={this.updateOptions}\n                  updateRange={this.updateRange}\n                  max={max}\n                  sliderVal={sliderVal}\n                  options={this.state}\n               />\n               <MapContainer\n                  isolines={this.state.isolines}\n                  center={this.state.center}\n                  zoom={this.state.zoom}\n                  handleMapMove={this.handleMapMove}\n                  handleMarkerDrag={this.handleMarkerDrag}\n               />\n            </lui-desktoplayer-theme>\n         </div>\n      );\n   }\n}\n/*\n\n*/\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}